# 요구사항 정의서 - 재결 검토 목록 화면

## 1. 화면 개요

### 1.1 화면 경로
- **URL**: `/conclusion/application`
- **화면명**: 재결 검토
- **접근 권한**: 재결관

### 1.2 화면 목적
- 재결 검토 대상 건의 목록을 조회하고 관리
- 검색 조건을 통한 데이터 필터링
- 검토 진행 상태별 상세 페이지로 이동

### 1.3 화면 특징
- 검토 진행 상태(검토대기/검토중/검토완료)에 따라 다른 상세 페이지로 분기
- 재결관 전용 화면으로 사업시행자는 접근 불가
- PDF 미리보기 기능 제공

---

## 2. 화면 구성

### 2.1 전체 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ 재결 검토 (페이지 제목)                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 검색 필터 영역 (ConclusionSearchFilter)                 │ │
│  │ - 사건번호 또는 사업명                                   │ │
│  │ - 접수일 (시작일 ~ 종료일)                               │ │
│  │ - 검토 진행현황 (체크박스)                               │ │
│  │ - 검색 / 초기화 버튼                                     │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 데이터 그리드 (PlatformDataGridV2)                      │ │
│  │ ┌────┬─────┬──────┬────┬────────┬────────┬────────┐  │ │
│  │ │재결│사건 │사업명 │담당│검토진행│LTIS진행│PDF미리 │  │ │
│  │ │일련│번호 │(링크) │자  │상태    │상태    │보기    │  │ │
│  │ │번호│     │      │    │        │        │        │  │ │
│  │ ├────┼─────┼──────┼────┼────────┼────────┼────────┤  │ │
│  │ │123 │2024-│도로  │홍  │검토중  │검토완료│[보기]  │  │ │
│  │ │    │00001│건설  │길동│        │        │        │  │ │
│  │ └────┴─────┴──────┴────┴────────┴────────┴────────┘  │ │
│  │                                                         │ │
│  │ [페이지네이션]                                           │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 검색 필터 영역 (ConclusionSearchFilter)

### 3.1 화면 구조

#### 3.1.1 컨테이너 (CSS Module)
- **클래스**: `.container`
- **너비**: 100%
- **정렬**: 중앙 (margin: 0 auto)
- **하단 여백**: `var(--spacing-xl)`

#### 3.1.2 폼 카드 (`.formCard`)
- **배경색**: white
- **테두리**: 1px solid var(--neutral-200)
- **모서리**: 0.5rem 둥근 모서리
- **그림자**: 0 1px 2px 0 rgba(0, 0, 0, 0.05)

#### 3.1.3 폼 내용 (`.formContent`)
- **패딩**: var(--spacing-xl)
- **레이아웃**: flex, column
- **간격**: var(--spacing-lg)

### 3.2 검색 조건 필드

#### 3.2.1 사건번호 또는 사업명
| 항목 | 내용 |
|------|------|
| 라벨 | 사건번호 또는 사업명 |
| 필드명 | keyword |
| 입력 형식 | 텍스트 입력 |
| placeholder | 사건번호 혹은 사업명 |
| 필수 여부 | 선택 |
| 검증 규칙 | 없음 |
| 기본값 | undefined |

**동작 설명**:
- 사건번호 또는 사업명의 일부만 입력해도 검색 가능
- 부분 일치 검색 지원 (서버측에서 LIKE 검색)

#### 3.2.2 접수일
| 항목 | 내용 |
|------|------|
| 라벨 | 접수일 |
| 필드명 | recepStartDt (시작일), recepEndDt (종료일) |
| 입력 형식 | 날짜 범위 선택 (DatePicker Range) |
| 필수 여부 | 선택 |
| 검증 규칙 | 시작일 ≤ 종료일 |
| 기본값 | undefined (시작일), undefined (종료일) |

**동작 설명**:
- 시작일과 종료일을 모두 선택하여 기간 검색
- 시작일만 선택: 시작일 이후의 모든 데이터 조회
- 종료일만 선택: 종료일 이전의 모든 데이터 조회
- 달력 UI를 통한 날짜 선택

#### 3.2.3 검토 진행현황
| 항목 | 내용 |
|------|------|
| 라벨 | 검토 진행현황 |
| 필드명 | statusCodeList |
| 입력 형식 | 다중 선택 체크박스 |
| 필수 여부 | 선택 |
| 기본값 | [] (빈 배열) |

**선택 옵션**:
| 값 (value) | 라벨 (label) | 설명 |
|-----------|-------------|------|
| CC001000 | 검토대기 | 재결관 검토 대기 상태 |
| CC001001 | 검토중 | 재결관 검토 진행 중 |
| CC001002 | 검토완료 | 재결관 검토 완료 |

**동작 설명**:
- 여러 개의 진행현황을 동시에 선택 가능
- 선택된 상태 코드 중 하나라도 일치하는 데이터 조회 (OR 조건)
- 아무것도 선택하지 않으면 모든 진행현황 조회
- 체크박스는 flex-wrap으로 여러 줄에 걸쳐 표시 가능

### 3.3 필드 레이아웃 (CSS Module)

#### 3.3.1 필드 행 (`.fieldRow`)
```css
display: flex
align-items: center
gap: var(--spacing-lg)
```

#### 3.3.2 라벨 (`.label`)
```css
font-size: var(--font-size-sm)
font-weight: var(--font-weight-medium)
color: var(--neutral-700)
width: 10rem        /* 160px */
flex-shrink: 0
```

#### 3.3.3 체크박스 컨테이너 (`.checkboxContainer`)
```css
display: flex
flex-wrap: wrap
gap: var(--spacing-lg)
```

### 3.4 버튼 영역

#### 3.4.1 버튼 영역 스타일 (`.buttonArea`)
```css
display: flex
gap: var(--spacing-lg)
padding-top: var(--spacing-lg)
justify-content: center
```

#### 3.4.2 검색 버튼
| 항목 | 내용 |
|------|------|
| 컴포넌트 | SearchButton |
| 타입 | submit |
| 동작 | 폼 제출 이벤트 발생 |

**동작 흐름**:
1. 검색 버튼 클릭
2. `handleSubmit` 함수 실행
3. `onSubmit` 콜백 호출
4. `setSearchParam` 상태 업데이트
5. 페이지를 0으로 초기화
6. API 재조회 (`refetch`)

#### 3.4.3 초기화 버튼
| 항목 | 내용 |
|------|------|
| 컴포넌트 | ResetButton |
| 타입 | button |
| 동작 | 폼 초기화 (`reset()`) |

**동작 흐름**:
1. 초기화 버튼 클릭
2. `reset()` 함수 실행
3. 모든 검색 조건이 기본값으로 초기화
4. 화면 갱신은 되지 않음 (검색 버튼을 다시 눌러야 함)

### 3.5 폼 관리

#### 3.5.1 React Hook Form 설정
```typescript
const { handleSubmit, register, control, reset } = useForm<GetConclusionInfoListParams>({
  defaultValues: {
    keyword: undefined,
    startRecepDt: undefined,
    endRecepDt: undefined,
    statusCodeList: [],
  },
})
```

#### 3.5.2 폼 속성
- **autoComplete**: off (자동완성 비활성화)
- **onSubmit**: `handleSubmit(onSubmit)`

---

## 4. 데이터 그리드 영역 (PlatformDataGridV2)

### 4.1 그리드 구조

#### 4.1.1 컴포넌트 정보
- **컴포넌트명**: PlatformDataGridV2
- **고유 키**: judgSeq (재결일련번호)
- **기본 페이지 크기**: 10
- **총 데이터 수**: API 응답의 `total` 값

### 4.2 컬럼 정의 (7개)

#### 4.2.1 재결일련번호
| 속성 | 값 |
|------|-----|
| accessorKey | judgSeq |
| header | 재결일련번호 |
| size | 100 |
| type | text |
| 정렬 | 중앙 정렬 |

**설명**:
- 각 재결 건의 고유 식별자
- 숫자 형식
- 그리드의 행 고유 키(rowId)로도 사용됨

#### 4.2.2 사건번호
| 속성 | 값 |
|------|-----|
| accessorKey | caseNo |
| header | 사건번호 |
| size | 100 |
| type | text |
| 정렬 | 중앙 정렬 |

**설명**:
- 재결 사건의 고유 번호
- 예: 2024-00001

#### 4.2.3 사업명 (링크 - 상태별 분기)
| 속성 | 값 |
|------|-----|
| accessorKey | caseTitle |
| header | 사업명 |
| size | 자동 (미지정) |
| type | text |
| 정렬 | 좌측 정렬 (기본값) |

**특수 렌더링**:

##### 링크 경로 결정 로직
```typescript
const getConclusionDetailLink = (judgSeq: string | number, statusCode: string): string => {
  const baseUrl = `/conclusion/application/${judgSeq}`

  // 재결관 검토 진행중
  if (statusCode === 'CC001001') {
    return `${baseUrl}/progress`
  }

  // 재결관 검토 완료
  if (statusCode === 'CC001002') {
    return `${baseUrl}/complete`
  }

  // 재결관 검토 대기 (start)
  return baseUrl
}
```

**링크 경로 매핑**:
| 상태 코드 | 상태명 | 링크 경로 | 설명 |
|----------|--------|----------|------|
| CC001000 | 검토대기 | `/conclusion/application/{judgSeq}` | 검토 시작 화면 |
| CC001001 | 검토중 | `/conclusion/application/{judgSeq}/progress` | 검토 진행 화면 |
| CC001002 | 검토완료 | `/conclusion/application/{judgSeq}/complete` | 검토 완료 화면 |

##### 셀 렌더링
```typescript
cell: ({ row }) => {
  const judgSeq = (row.getValue('judgSeq') as string) ?? '0'
  const statusCode = row.original.statusCode ?? ''
  const link = getConclusionDetailLink(judgSeq, statusCode)

  return (
    <PlatformDataGridV2LinkButton link={link} title={row.getValue('caseTitle')} />
  )
}
```

**사용자 경험**:
- 사업명을 클릭하면 현재 검토 상태에 맞는 화면으로 이동
- 검토대기 건: 검토 시작 화면
- 검토중 건: 검토 진행 화면 (이어서 작성)
- 검토완료 건: 검토 완료 화면 (읽기 전용)

#### 4.2.4 담당자
| 속성 | 값 |
|------|-----|
| accessorKey | chargeNm |
| header | 담당자 |
| size | 120 |
| type | text |
| 정렬 | 중앙 정렬 |

**설명**:
- 해당 재결 건의 담당 재결관 이름

#### 4.2.5 검토 진행상태
| 속성 | 값 |
|------|-----|
| accessorKey | statusName |
| header | 검토 진행상태 |
| size | 110 |
| type | text |
| 정렬 | 중앙 정렬 |

**설명**:
- 현재 검토 진행 단계의 이름 표시
- 예: 검토대기, 검토중, 검토완료

#### 4.2.6 LTIS 진행상태
| 속성 | 값 |
|------|-----|
| accessorKey | ltisStateName |
| header | LTIS 진행상태 |
| size | 170 |
| type | text |
| 정렬 | 중앙 정렬 |

**설명**:
- LTIS 시스템에서의 진행 상태
- 외부 시스템(LTIS)과의 연동 상태 표시

#### 4.2.7 PDF 미리보기
| 속성 | 값 |
|------|-----|
| accessorKey | pdfView |
| header | PDF 미리보기 |
| size | 170 |
| type | text |
| 정렬 | 중앙 정렬 (align: center) |

**설명**:
- 재결서 PDF 미리보기 링크 또는 버튼
- 현재는 텍스트 타입으로 정의 (향후 버튼 컴포넌트로 확장 가능)

### 4.3 페이지네이션

#### 4.3.1 페이지 설정
| 항목 | 내용 |
|------|------|
| 기본 페이지 크기 | 10 (DEFAULT_PAGE_SIZE) |
| 초기 페이지 | 0 (INITIAL_PAGE) |
| 페이지 크기 옵션 | (PlatformDataGridV2 설정에 따름) |
| 총 페이지 수 | totalPageSize / pageSize |
| 현재 페이지 | searchParam.page (기본값: 0) |

#### 4.3.2 페이지 변경 이벤트

##### onChangePage
- **호출 시점**: 사용자가 페이지 번호 클릭
- **전달 파라미터**: 새로운 페이지 번호
- **동작**:
    - searchParam의 page 업데이트
    - API 재조회

##### onChangePageSize
- **호출 시점**: 사용자가 페이지 크기 변경
- **전달 파라미터**: 새로운 페이지 크기
- **동작**:
    - searchParam의 pageSize 업데이트
    - page를 0으로 초기화
    - API 재조회

### 4.4 로딩 상태
- **로딩 프로퍼티**: `loading={isLoading}`
- **동작**:
    - API 조회 중에는 로딩 스피너 표시
    - 데이터 조회 완료 시 그리드 렌더링

### 4.5 빈 데이터 처리
- **데이터**: `data={data?.resultList ?? []}`
- **동작**:
    - API 응답이 없으면 빈 배열 표시
    - 빈 배열일 경우 "데이터가 없습니다" 메시지 표시 (PlatformDataGridV2 내부 처리)

---

## 5. 데이터 흐름 및 API

### 5.1 상태 관리

#### 5.1.1 검색 파라미터 상태
```typescript
const [searchParam, setSearchParam] = useState<GetConclusionInfoListParams>({})
```

**초기 상태**: 빈 객체 ({})

**상태 업데이트 시점**:
1. 검색 버튼 클릭 시
2. 페이지 변경 시
3. 페이지 크기 변경 시

#### 5.1.2 페이지네이션 상태
```typescript
const { pagination, onChangePage, onChangePageSize } = usePlatformDataGridV2Pagination()
```

**pagination 객체 구조**:
```typescript
{
  page: number,      // 현재 페이지 (0부터 시작)
  pageSize: number   // 페이지 크기
}
```

### 5.2 API 호출

#### 5.2.1 조회 API
**함수명**: `useGetConclusionInfoList`

**요청 파라미터**:
```typescript
{
  ...searchParam,   // 검색 조건
  ...pagination,    // 페이지 정보
}
```

**파라미터 병합 예시**:
```typescript
{
  keyword: "도로건설",
  recepStartDt: "2024-01-01",
  recepEndDt: "2024-12-31",
  statusCodeList: ["CC001000", "CC001001"],
  page: 0,
  pageSize: 10
}
```

**응답 구조**:
```typescript
{
  resultList: [
    {
      judgSeq: number,           // 재결일련번호
      caseNo: string,            // 사건번호
      caseTitle: string,         // 사업명
      chargeNm: string,          // 담당자
      statusCode: string,        // 검토 진행상태 코드
      statusName: string,        // 검토 진행상태 이름
      ltisStateName: string,     // LTIS 진행상태
      pdfView: string,           // PDF 미리보기
    },
    // ... more items
  ],
  total: number,                 // 전체 데이터 수
}
```

#### 5.2.2 React Query 설정
```typescript
const { data, isLoading, refetch } = useGetConclusionInfoList({
  ...searchParam,
  ...pagination
})
```

**반환값**:
- `data`: API 응답 데이터
- `isLoading`: 로딩 상태
- `refetch`: 수동 재조회 함수

### 5.3 검색 제출 핸들러

```typescript
const handleSearchSubmit: SubmitHandler<GetConclusionInfoListParams> = data => {
  setSearchParam(params => ({
    ...params,
    ...data,
    page: INITIAL_PAGE,           // 검색 시 페이지 0으로 초기화
    pageSize: DEFAULT_PAGE_SIZE   // 기본 페이지 크기 유지
  }))
  void refetch()                  // API 재조회
}
```

**동작 순서**:
1. 검색 폼 제출
2. 검색 조건을 searchParam에 병합
3. 페이지를 0으로 초기화
4. 페이지 크기를 기본값(10)으로 설정
5. API 재조회

---

## 6. 상태 코드 및 화면 분기

### 6.1 검토 진행 상태 코드
| 코드 | 이름 | 설명 | 상세 페이지 경로 | 용도 |
|------|------|------|-----------------|------|
| CC001000 | 검토대기 | 재결관 검토 대기 | `/conclusion/application/{judgSeq}` | 검토 시작 |
| CC001001 | 검토중 | 재결관 검토 진행중 | `/conclusion/application/{judgSeq}/progress` | 검토 진행 |
| CC001002 | 검토완료 | 재결관 검토 완료 | `/conclusion/application/{judgSeq}/complete` | 검토 완료 |

### 6.2 화면 분기 로직

#### 6.2.1 링크 생성 함수
```typescript
const getConclusionDetailLink = (judgSeq: string | number, statusCode: string): string => {
  const baseUrl = `/conclusion/application/${judgSeq}`

  // 재결관 검토 진행중
  if (statusCode === CONCLUSION_STATUS.IN_PROGRESS) {
    return `${baseUrl}/progress`
  }

  // 재결관 검토 완료
  if (statusCode === CONCLUSION_STATUS.COMPLETED) {
    return `${baseUrl}/complete`
  }

  // 재결관 검토 대기 (start)
  return baseUrl
}
```

#### 6.2.2 상태 코드 상수
```typescript
const CONCLUSION_STATUS = {
  WAITING: 'CC001000',      // 재결관 검토 대기
  IN_PROGRESS: 'CC001001',  // 재결관 검토 진행중
  COMPLETED: 'CC001002',    // 재결관 검토 완료
} as const
```

### 6.3 사용자 시나리오

#### 6.3.1 검토대기 건 클릭
1. 사업명 클릭
2. `/conclusion/application/{judgSeq}` 이동
3. 검토 시작 화면 표시
4. 재결관이 검토 시작 버튼 클릭
5. 상태가 "검토중"으로 변경

#### 6.3.2 검토중 건 클릭
1. 사업명 클릭
2. `/conclusion/application/{judgSeq}/progress` 이동
3. 검토 진행 화면 표시
4. 이전에 작성한 내용 이어서 작성
5. 검토 완료 시 "검토완료"로 변경

#### 6.3.3 검토완료 건 클릭
1. 사업명 클릭
2. `/conclusion/application/{judgSeq}/complete` 이동
3. 검토 완료 화면 표시 (읽기 전용)
4. 작성한 검토 의견 확인

---

## 7. UI/UX 사양

### 7.1 CSS 변수 (디자인 토큰)

#### 7.1.1 간격 (Spacing)
| 변수명 | 값 | 사용처 |
|--------|-----|--------|
| --spacing-lg | (프로젝트 설정) | 필드 간격, 버튼 간격 |
| --spacing-xl | (프로젝트 설정) | 컨테이너 하단 여백, 폼 내부 패딩 |

#### 7.1.2 색상 (Colors)
| 변수명 | 값 | 사용처 |
|--------|-----|--------|
| --neutral-200 | (프로젝트 설정) | 폼 카드 테두리 |
| --neutral-700 | (프로젝트 설정) | 라벨 텍스트 색상 |

#### 7.1.3 폰트 (Typography)
| 변수명 | 값 | 사용처 |
|--------|-----|--------|
| --font-size-sm | (프로젝트 설정) | 라벨 폰트 크기 |
| --font-weight-medium | (프로젝트 설정) | 라벨 폰트 굵기 |

### 7.2 반응형 레이아웃

#### 7.2.1 검색 필터
- **최대 너비**: 100%
- **중앙 정렬**: margin: 0 auto
- **하단 여백**: var(--spacing-xl)

#### 7.2.2 필드 레이아웃
- **라벨 너비**: 10rem (160px)
- **라벨 스타일**: flex-shrink: 0 (축소 방지)
- **필드 간격**: var(--spacing-lg)

### 7.3 스타일링

#### 7.3.1 검색 필터 컨테이너
```css
.formCard {
  background-color: white;
  border: 1px solid var(--neutral-200);
  border-radius: 0.5rem;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}
```

#### 7.3.2 폼 내용
```css
.formContent {
  padding: var(--spacing-xl);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}
```

#### 7.3.3 버튼 영역
```css
.buttonArea {
  display: flex;
  gap: var(--spacing-lg);
  padding-top: var(--spacing-lg);
  justify-content: center;
}
```

### 7.4 접근성

#### 7.4.1 폼 레이블
- 모든 입력 필드에 `<label>` 제공
- `htmlFor` 속성으로 입력 필드 연결

#### 7.4.2 버튼
- 명확한 버튼 텍스트 ("검색", "초기화")
- `type` 속성 명시 (submit, button)

#### 7.4.3 키보드 네비게이션
- 탭 키로 모든 입력 필드 이동 가능
- Enter 키로 검색 실행 가능

---

## 8. 비즈니스 규칙

### 8.1 검색 규칙

#### 8.1.1 부분 일치 검색
- **대상 필드**: keyword
- **동작**: 입력된 텍스트가 포함된 모든 데이터 조회
- **대소문자**: 구분 없음 (서버측에서 처리)

#### 8.1.2 날짜 범위 검색
- **시작일과 종료일 모두 입력**: 해당 기간 내 데이터 조회
- **시작일만 입력**: 시작일 이후 모든 데이터 조회
- **종료일만 입력**: 종료일 이전 모든 데이터 조회
- **모두 미입력**: 모든 데이터 조회

#### 8.1.3 다중 선택 검색 (검토 진행현황)
- **선택 없음**: 모든 진행현황 조회
- **1개 선택**: 해당 진행현황만 조회
- **여러 개 선택**: 선택된 진행현황 중 하나라도 일치하는 데이터 조회 (OR 조건)

#### 8.1.4 AND 조건
- 모든 검색 조건은 AND 조건으로 결합
- 예: keyword="도로" AND statusCodeList IN ["CC001000", "CC001001"]

### 8.2 페이징 규칙

#### 8.2.1 페이지 초기화 시점
- 검색 버튼 클릭 시: 페이지 0으로 초기화
- 페이지 크기 변경 시: 페이지 0으로 초기화

#### 8.2.2 페이지 번호
- **시작 번호**: 0 (백엔드에서 0부터 시작)
- **표시 번호**: 1부터 시작 (사용자 UI에서는 1, 2, 3... 으로 표시)

### 8.3 데이터 정렬

#### 8.3.1 기본 정렬
- **정렬 기준**: 접수일 내림차순 (최신 순) 또는 재결일련번호 내림차순
- **서버측 처리**: API에서 정렬된 데이터 제공

#### 8.3.2 컬럼 정렬 (향후 기능)
- 현재는 컬럼 클릭 정렬 미지원
- 필요 시 PlatformDataGridV2의 정렬 기능 활성화 가능

### 8.4 화면 분기 규칙

#### 8.4.1 상태별 경로
- **검토대기**: `/conclusion/application/{judgSeq}` (start)
- **검토중**: `/conclusion/application/{judgSeq}/progress`
- **검토완료**: `/conclusion/application/{judgSeq}/complete`

#### 8.4.2 권한 확인
- 재결관만 접근 가능
- 사업시행자는 접근 불가 (권한 오류)

---

## 9. 오류 처리

### 9.1 API 오류

#### 9.1.1 네트워크 오류
- **발생 시점**: 서버 연결 실패
- **처리**: React Query의 기본 오류 처리
- **사용자 알림**: 오류 메시지 표시 (토스트 또는 모달)

#### 9.1.2 서버 오류 (5xx)
- **발생 시점**: 서버 내부 오류
- **처리**: React Query의 재시도 메커니즘
- **사용자 알림**: 오류 메시지 표시

#### 9.1.3 권한 오류 (401, 403)
- **발생 시점**: 인증 만료 또는 권한 없음
- **처리**: 로그인 페이지로 리다이렉트
- **사용자 알림**: 권한 부족 메시지

### 9.2 데이터 오류

#### 9.2.1 빈 데이터
- **발생 시점**: 검색 결과가 없음
- **처리**: 빈 배열 전달 (`data?.resultList ?? []`)
- **사용자 알림**: "검색 결과가 없습니다" 메시지 (그리드 내부 처리)

#### 9.2.2 데이터 형식 오류
- **발생 시점**: API 응답 구조가 예상과 다름
- **처리**: 옵셔널 체이닝 (`?.`) 사용으로 안전하게 처리
- **폴백 값**: undefined 또는 빈 배열

---

## 10. 성능 최적화

### 10.1 React Query 캐싱
- **캐시 타임**: React Query 기본 설정 사용
- **staleTime**: 설정되지 않음 (즉시 stale 상태)
- **재조회**:
    - 검색 시 수동 재조회 (`refetch()`)
    - 창 포커스 시 자동 재조회 (React Query 기본 동작)

### 10.2 상태 최적화
- **검색 파라미터**: 변경 시에만 리렌더링
- **페이지네이션**: 별도 훅으로 분리하여 관리

### 10.3 렌더링 최적화
- **지연 로딩**: 목록 컴포넌트는 lazy loading으로 로드
- **메모이제이션**: 컬럼 정의는 컴포넌트 내부에 정적으로 정의

### 10.4 코드 품질
- **상수 정의**: 매직 넘버/문자열을 상수로 정의
    - `DEFAULT_PAGE_SIZE`, `INITIAL_PAGE`
    - `CONCLUSION_STATUS` 객체
- **함수 분리**: 링크 생성 로직을 별도 함수로 분리
    - `getConclusionDetailLink()`

---

## 11. 테스트 시나리오

### 11.1 기본 기능 테스트

#### 11.1.1 초기 로딩
1. `/conclusion/application` 접속
2. 검색 필터와 빈 그리드 표시 확인
3. 기본 데이터 로딩 확인 (전체 목록)

#### 11.1.2 검색 기능
1. 키워드 검색 테스트
    - 사건번호 입력 후 검색
    - 사업명 입력 후 검색
    - 부분 일치 검색 확인
2. 날짜 범위 검색 테스트
    - 시작일만 선택 후 검색
    - 종료일만 선택 후 검색
    - 시작일과 종료일 모두 선택 후 검색
3. 검토 진행현황 검색 테스트
    - 단일 선택 (검토대기)
    - 다중 선택 (검토대기 + 검토중)
    - 선택 없음
4. 복합 검색 테스트 (여러 조건 동시 입력)

#### 11.1.3 초기화 기능
1. 검색 조건 입력
2. 초기화 버튼 클릭
3. 모든 필드가 기본값으로 초기화되는지 확인
4. 검색 버튼 클릭하여 전체 목록 조회 확인

### 11.2 페이지네이션 테스트

#### 11.2.1 페이지 이동
1. 다음 페이지로 이동
2. 이전 페이지로 이동
3. 특정 페이지 번호 클릭
4. 첫 페이지/마지막 페이지 이동

#### 11.2.2 페이지 크기 변경
1. 페이지 크기 변경 (예: 10 → 20)
2. 페이지가 0으로 초기화되는지 확인
3. 데이터가 새 페이지 크기에 맞게 표시되는지 확인

### 11.3 그리드 기능 테스트

#### 11.3.1 데이터 표시
1. 모든 컬럼 데이터 정상 표시 확인
2. PDF 미리보기 컬럼 확인

#### 11.3.2 링크 기능 (상태별 분기)
1. 검토대기 건 클릭
    - `/conclusion/application/{judgSeq}` 이동 확인
2. 검토중 건 클릭
    - `/conclusion/application/{judgSeq}/progress` 이동 확인
3. 검토완료 건 클릭
    - `/conclusion/application/{judgSeq}/complete` 이동 확인

#### 11.3.3 빈 데이터
1. 검색 결과가 없는 조건으로 검색
2. "검색 결과가 없습니다" 메시지 표시 확인

### 11.4 오류 처리 테스트

#### 11.4.1 네트워크 오류
1. 네트워크 연결 차단
2. 검색 실행
3. 오류 메시지 표시 확인

#### 11.4.2 권한 오류
1. 사업시행자 계정으로 접속 시도
2. 권한 오류 표시 또는 접근 차단 확인

---

## 12. 접근성 (Accessibility)

### 12.1 키보드 네비게이션
- **Tab 키**: 모든 입력 필드 및 버튼 순차 이동
- **Enter 키**: 검색 폼 제출
- **Shift + Tab**: 역순 이동

### 12.2 스크린 리더 지원
- 모든 입력 필드에 `<label>` 제공
- `htmlFor` 속성으로 레이블과 입력 필드 연결
- 버튼에 명확한 텍스트 제공

### 12.3 포커스 관리
- 검색 버튼 클릭 후 포커스 유지
- 초기화 후 첫 번째 입력 필드로 포커스 이동 (선택사항)

---

## 13. 브라우저 호환성

### 13.1 지원 브라우저
- Chrome (최신 버전)
- Firefox (최신 버전)
- Safari (최신 버전)
- Edge (최신 버전)

### 13.2 모바일 지원
- iOS Safari (최신 버전)
- Android Chrome (최신 버전)
- 반응형 레이아웃 지원

---

## 14. 향후 개선 사항

### 14.1 기능 개선
- [ ] 컬럼 정렬 기능 (클릭 시 오름차순/내림차순)
- [ ] 컬럼 숨김/표시 기능
- [ ] 엑셀 다운로드 기능
- [ ] PDF 미리보기 기능 구현 (현재는 플레이스홀더)
- [ ] 일괄 처리 기능 (선택된 항목 일괄 처리)
- [ ] 검색 조건 저장 기능 (즐겨찾기)

### 14.2 UX 개선
- [ ] 검색 조건 표시 (적용된 필터 태그)
- [ ] 검색 히스토리 (최근 검색어)
- [ ] 고급 검색 옵션 (접기/펼치기)
- [ ] 상세 화면에서 돌아왔을 때 검색 조건 유지
- [ ] 무한 스크롤 옵션

### 14.3 성능 개선
- [ ] 가상 스크롤 (대량 데이터 처리)
- [ ] 서버 사이드 정렬
- [ ] 필터링 디바운싱 (실시간 검색)

---

## 15. API 명세

### 15.1 요청 (Request)

#### 15.1.1 엔드포인트
```
GET /api/conclusion/info/list
```

#### 15.1.2 요청 파라미터
| 파라미터 | 타입 | 필수 | 설명 | 예시 |
|---------|------|------|------|------|
| keyword | string | N | 사건번호 또는 사업명 | "도로건설" |
| recepStartDt | string | N | 접수 시작일 (YYYY-MM-DD) | "2024-01-01" |
| recepEndDt | string | N | 접수 종료일 (YYYY-MM-DD) | "2024-12-31" |
| statusCodeList | string[] | N | 진행상황 코드 배열 | ["CC001000", "CC001001"] |
| page | number | Y | 페이지 번호 (0부터 시작) | 0 |
| pageSize | number | Y | 페이지 크기 | 10 |

#### 15.1.3 요청 예시
```
GET /api/conclusion/info/list?keyword=도로&recepStartDt=2024-01-01&recepEndDt=2024-12-31&statusCodeList=CC001000&statusCodeList=CC001001&page=0&pageSize=10
```

### 15.2 응답 (Response)

#### 15.2.1 성공 응답 (200 OK)
```json
{
  "resultList": [
    {
      "judgSeq": 123,
      "caseNo": "2024-00001",
      "caseTitle": "서울시 도로건설 사업 재결 검토",
      "chargeNm": "홍길동",
      "statusCode": "CC001001",
      "statusName": "검토중",
      "ltisStateName": "검토완료",
      "pdfView": "보기"
    },
    {
      "judgSeq": 124,
      "caseNo": "2024-00002",
      "caseTitle": "서울시 도시재생 사업 재결 검토",
      "chargeNm": "김철수",
      "statusCode": "CC001000",
      "statusName": "검토대기",
      "ltisStateName": "접수완료",
      "pdfView": ""
    }
  ],
  "total": 25
}
```

#### 15.2.2 응답 필드 설명
| 필드 | 타입 | 설명 |
|------|------|------|
| resultList | array | 검색 결과 목록 |
| resultList[].judgSeq | number | 재결일련번호 |
| resultList[].caseNo | string | 사건번호 |
| resultList[].caseTitle | string | 사업명 |
| resultList[].chargeNm | string | 담당자 이름 |
| resultList[].statusCode | string | 검토 진행상태 코드 |
| resultList[].statusName | string | 검토 진행상태 이름 |
| resultList[].ltisStateName | string | LTIS 진행상태 이름 |
| resultList[].pdfView | string | PDF 미리보기 (버튼 텍스트 또는 링크) |
| total | number | 전체 데이터 수 (페이징용) |

#### 15.2.3 오류 응답

##### 400 Bad Request
```json
{
  "error": "INVALID_PARAMETER",
  "message": "잘못된 파라미터입니다.",
  "details": {
    "field": "recepStartDt",
    "reason": "날짜 형식이 올바르지 않습니다."
  }
}
```

##### 401 Unauthorized
```json
{
  "error": "UNAUTHORIZED",
  "message": "인증이 필요합니다."
}
```

##### 403 Forbidden
```json
{
  "error": "FORBIDDEN",
  "message": "재결관 권한이 필요합니다."
}
```

##### 500 Internal Server Error
```json
{
  "error": "INTERNAL_SERVER_ERROR",
  "message": "서버 내부 오류가 발생했습니다."
}
```

---

## 16. 보안 고려사항

### 16.1 입력 검증
- **클라이언트 측**: 기본적인 형식 검증
- **서버 측**: 모든 입력값에 대한 철저한 검증
- **SQL Injection 방지**: 파라미터화된 쿼리 사용

### 16.2 인증/인가
- **세션 관리**: 로그인 세션 유지
- **권한 검증**: 재결관 권한 확인
- **토큰 갱신**: 자동 토큰 갱신 메커니즘

### 16.3 데이터 보호
- **HTTPS**: 모든 통신 암호화
- **민감 정보**: 개인정보 마스킹 처리 (필요 시)
- **XSS 방지**: React의 자동 이스케이프 활용

### 16.4 역할 기반 접근 제어
- **재결관**: 전체 접근 가능
- **사업시행자**: 접근 불가 (403 Forbidden)

---

## 17. 모니터링 및 로깅

### 17.1 사용자 행동 추적
- 검색 쿼리 로깅 (어떤 조건으로 검색하는지)
- 페이지 이동 패턴 분석
- 자주 조회되는 재결 건 파악

### 17.2 성능 모니터링
- API 응답 시간 측정
- 페이지 로딩 시간 측정
- 에러 발생률 모니터링

### 17.3 오류 로깅
- API 오류 로깅 (에러 코드, 메시지)
- 클라이언트 오류 로깅 (콘솔 에러)
- 사용자 피드백 수집

---

## 18. 재결 검토 vs 재결 접수 비교

### 18.1 화면 비교
| 항목 | 재결 접수 (/receipt/application) | 재결 검토 (/conclusion/application) |
|------|----------------------------------|-------------------------------------|
| 사용자 | 사업시행자 | 재결관 |
| 검색 조건 수 | 5개 (사건번호/사업명, 접수일, 소재지, 시행자명, 진행현황) | 3개 (사건번호/사업명, 접수일, 진행현황) |
| 그리드 컬럼 수 | 8개 | 7개 |
| 상태 코드 | CR001xxx | CC001xxx |
| 링크 분기 | 없음 (단일 경로) | 있음 (상태별 3개 경로) |
| PDF 미리보기 | 없음 | 있음 |

### 18.2 상태 코드 체계
| 재결 접수 (CR001xxx) | 재결 검토 (CC001xxx) | 설명 |
|---------------------|---------------------|------|
| CR001000 ~ CR001007 | - | 사업시행자 입력 단계 (8단계) |
| - | CC001000 | 재결관 검토대기 |
| - | CC001001 | 재결관 검토중 |
| - | CC001002 | 재결관 검토완료 |

---

## 19. 관련 문서

### 19.1 컴포넌트 경로
- ConclusionReviewApplication: `src/views/conclusion/review/application/ConclusionReviewApplication.tsx`
- ConclusionSearchFilter: `src/components/conclusion/ConclusionSearchFilter.tsx`
- ConclusionSearchFilter.module.css: `src/components/conclusion/ConclusionSearchFilter.module.css`
- PlatformDataGridV2: `src/components/common/dataGrid/PlatformDataGridV2.tsx`

### 19.2 상수 파일
- CONCLUSION_PROGRESS_STATUS_OPTIONS: `src/constants/conclusion/conclusionStatus.ts`

### 19.3 라우터 설정
- conclusion router: `src/router/conclusion/index.tsx`

### 19.4 훅
- usePlatformDataGridV2Pagination: `src/components/common/dataGrid/hook/usePlatformDataGridV2Pagination.ts`
- useGetConclusionInfoList: `src/api/conclusion-base-api/conclusion-base-api.ts` (orval 생성)

### 19.5 연관 화면
- 검토 시작 화면: `/conclusion/application/{judgSeq}` (ConclusionReviewStar.tsx)
- 검토 진행 화면: `/conclusion/application/{judgSeq}/progress` (ConclusionReviewProgress.tsx)
- 검토 완료 화면: `/conclusion/application/{judgSeq}/complete` (ConclusionReviewComplete.tsx)

---

## 20. 변경 이력

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 2025-XX-XX | 1.0 | 초안 작성 | - |

---

## 21. 용어 정의

| 용어 | 설명 |
|------|------|
| 재결 | 토지 수용 및 보상에 관한 분쟁을 해결하기 위한 행정적 결정 |
| 재결관 | 재결 업무를 담당하는 공무원 또는 위원 |
| 사업시행자 | 공공사업을 시행하는 기관 또는 단체 |
| LTIS | Land & Transport Information System (토지 및 교통 정보 시스템) |
| 검토 진행현황 | 재결관의 재결 검토 진행 단계 |
| 검토대기 | 재결관 검토를 시작하지 않은 상태 |
| 검토중 | 재결관이 검토를 진행하고 있는 상태 |
| 검토완료 | 재결관 검토가 완료된 상태 |