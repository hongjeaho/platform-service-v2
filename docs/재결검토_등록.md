# 요구사항 정의서 - 재결 검토 시작 화면

## 1. 화면 개요

### 1.1 화면 경로
- **URL**: `/conclusion/application/{judgSeq}`
- **화면명**: 심의서 검토 확인
- **접근 권한**: 재결관
- **상태 조건**:
    - 접수 상태: CR001007 (의견작성 완료)
    - 검토 상태: CC001000 (검토대기)

### 1.2 화면 목적
- 사업시행자가 작성한 재결신청 내용을 재결관이 검토하기 전에 확인
- 검토 시작을 확인하면 "검토중" 상태로 변경
- 검토 진행 화면(`/conclusion/application/{judgSeq}/progress`)으로 이동

### 1.3 화면 특징
- **읽기 전용**: 모든 정보는 조회만 가능
- **상태 검증**: 잘못된 상태에서 접근 시 차단
- **원클릭 시작**: "검토 확인" 버튼 클릭으로 검토 시작

---

## 2. 화면 구성

### 2.1 전체 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│ 심의서 검토 확인 (페이지 제목)                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 1. 사업 정보 섹션 (ReceiptCaseInfoView)                 │ │
│  │   - 사업 정보                                           │ │
│  │   - 협의 정보                                           │ │
│  │   - 도시계획 [사업인정] 관계                             │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 2. 협의 감정평가 정보 (ReceiptPreviousAppraisalView)   │ │
│  │   - 시도지사 추천 여부                                   │ │
│  │   - 협의 공고 첨부파일                                   │ │
│  │   - 협의 감정평가 정보                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 3. 총 물량조서 (ReceiptTotalQuantityReportView)        │ │
│  │   - 토지/물건/영업권/기타 물량 정보                      │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 4. 첨부 파일 (ReceiptAttachmentFileView)               │ │
│  │   - 재결신청 관련 모든 첨부파일                          │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 5. 사업시행자 의견 (OpinionCaseTemplateCommentTabSection)│ │
│  │   - 사업시행자가 작성한 의견 (읽기 전용)                 │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 하단 버튼 영역                                          │ │
│  │  [목록 보기]  [검토 확인]                               │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 3. 접근 권한 및 상태 검증

### 3.1 필수 상태 조건

#### 3.1.1 접수 상태 코드 (Receipt Status)
| 코드 | 이름 | 설명 | 필수 여부 |
|------|------|------|----------|
| CR001007 | 의견작성 | 사업시행자가 의견 작성 완료 | **필수** |

**검증 로직**:
```typescript
receiptCurrentStatusCode !== 'CR001007'  // 접근 차단
```

#### 3.1.2 검토 상태 코드 (Conclusion Status)
| 코드 | 이름 | 설명 | 필수 여부 |
|------|------|------|----------|
| CC001000 | 검토대기 | 재결관 검토 대기 상태 | **필수** |

**검증 로직**:
```typescript
conclusionCurrentStatusCode !== 'CC001000'  // 접근 차단
```

### 3.2 접근 차단 로직

#### 3.2.1 useEffect 검증
```typescript
useEffect(() => {
  const isInvalidStatus =
    receiptCurrentStatusCode !== 'CR001007' ||
    conclusionCurrentStatusCode !== 'CC001000'

  if (isInvalidStatus) {
    showAlertMessageCallBack('잘못된 접근입니다.', () => {
      navigate('/conclusion/application')
    })
  }
}, [conclusionCurrentStatusCode, receiptCurrentStatusCode, showAlertMessageCallBack, navigate])
```

#### 3.2.2 차단 시나리오
| 시나리오 | 접수 상태 | 검토 상태 | 결과 |
|---------|----------|----------|------|
| 정상 접근 | CR001007 | CC001000 | 화면 표시 |
| 사업시행자 미완료 | CR001006 이하 | CC001000 | 차단 → 목록으로 이동 |
| 이미 검토중 | CR001007 | CC001001 | 차단 → 목록으로 이동 |
| 검토완료 | CR001007 | CC001002 | 차단 → 목록으로 이동 |

### 3.3 API 호출

#### 3.3.1 접수 상태 코드 조회
- **API**: `useGetReceiptCurrentStatusCode`
- **파라미터**: judgSeq
- **캐싱**: staleTime: 0 (항상 최신 데이터 조회)

#### 3.3.2 검토 상태 코드 조회
- **API**: `useGetConclusionCurrentStatusCode`
- **파라미터**: judgSeq
- **캐싱**: staleTime: 0 (항상 최신 데이터 조회)

---

## 4. 화면 섹션 상세

### 4.1 섹션 1: 사업 정보 (ReceiptCaseInfoView)

#### 4.1.1 컴포넌트 정보
- **컴포넌트**: ReceiptCaseInfoView
- **props**: judgSeq
- **데이터 조회**: useGetReceiptCaseInfoByJudgSeq

#### 4.1.2 하위 섹션

##### 4.1.2.1 사업 정보 (ReceiptBusinessInfoView)
| 필드명 | 설명 |
|--------|------|
| 규모(단위) | 사업 규모 |
| 사업 기간 | 사업 진행 기간 |
| 재결신청 사유 | 재결 신청 이유 |

##### 4.1.2.2 협의 정보 (ReceiptAgreementDateView)
| 필드명 | 설명 |
|--------|------|
| 협의 날짜 | 협의 진행 날짜 |
| 협의 내용 | 협의 내용 설명 |

**특징**: 여러 건의 협의 정보 표시 (동적 목록)

##### 4.1.2.3 도시계획 [사업인정] 관계 (ReceiptBusinessRecognitionView)
| 필드명 | 설명 |
|--------|------|
| 제목 | 사업인정 관계 제목 |
| 내용 | 사업인정 관계 내용 |

**특징**: 여러 건의 사업인정 정보 표시 (동적 목록)

### 4.2 섹션 2: 협의 감정평가 정보 (ReceiptPreviousAppraisalView)

#### 4.2.1 컴포넌트 정보
- **컴포넌트**: ReceiptPreviousAppraisalView
- **props**: judgSeq
- **표시 방식**: 읽기 전용

#### 4.2.2 표시 내용

##### 4.2.2.1 시도지사 추천 여부
- 네 / 아니오
- 아니오인 경우: 사유 표시

##### 4.2.2.2 협의 공고 첨부파일
| 파일 유형 | 표시 조건 |
|----------|----------|
| 협의 공고 파일 | 항상 |
| 협의 의뢰 공문 | 시도지사 추천 = 네 |
| 협의 회신 공문 | 시도지사 추천 = 네 |

##### 4.2.2.3 협의 감정평가 정보
| 추천 기관 | 표시 조건 |
|----------|----------|
| 사업시행자 | 항상 |
| 시도지사 추천 | 시도지사 추천 = 네 |
| 토지 소유자 | 추가된 경우만 |
| 사업시행자 추가 | 추가된 경우만 |

**각 행 표시 정보**:
- 감정평가 법인
- 협의 금액
- 감정평가서 (PDF 다운로드)

### 4.3 섹션 3: 총 물량조서 (ReceiptTotalQuantityReportView)

#### 4.3.1 컴포넌트 정보
- **컴포넌트**: ReceiptTotalQuantityReportView
- **props**: judgSeq
- **표시 방식**: 테이블 형태 (읽기 전용)

#### 4.3.2 테이블 구조
```
┌────────┬──────────────────────┬──────────────────────┬──────────────────────┐
│ 구분    │    총 보상대상        │     협의취득          │     재결신청          │
│        ├──────┬───────┬──────┼──────┬───────┬──────┼──────┬───────┬──────┤
│        │필,건  │면적(m²)│금액(천원)│필,건  │면적(m²)│금액(천원)│필,건  │면적(m²)│금액(천원)│
├────────┼──────┼───────┼──────┼──────┼───────┼──────┼──────┼───────┼──────┤
│ 토지    │      │        │      │      │        │      │      │        │      │
├────────┼──────┼───────┼──────┼──────┼───────┼──────┼──────┼───────┼──────┤
│ 물건    │      │   -    │      │      │   -    │      │      │   -    │      │
├────────┼──────┼───────┼──────┼──────┼───────┼──────┼──────┼───────┼──────┤
│ 영업권  │      │   -    │      │      │   -    │      │      │   -    │      │
├────────┼──────┼───────┼──────┼──────┼───────┼──────┼──────┼───────┼──────┤
│ 기타    │      │        │      │      │        │      │      │        │      │
├────────┼──────┼───────┼──────┼──────┼───────┼──────┼──────┼───────┼──────┤
│ 합계    │      │        │      │      │        │      │      │        │      │
└────────┴──────┴───────┴──────┴──────┴───────┴──────┴──────┴───────┴──────┘
```

#### 4.3.3 표시 데이터
- 모든 값은 사업시행자가 입력한 데이터
- 수정 불가 (읽기 전용)
- 천 단위 콤마 표시

### 4.4 섹션 4: 첨부 파일 (ReceiptAttachmentFileView)

#### 4.4.1 컴포넌트 정보
- **컴포넌트**: ReceiptAttachmentFileView
- **props**: judgSeq
- **표시 방식**: 카테고리별 파일 목록

#### 4.4.2 첨부파일 카테고리 (14개)
| 순서 | 카테고리명 | 문서 수 |
|------|----------|--------|
| 1 | 적정성 검토서 | 1 |
| 2 | 신청 문서(공문) | 1 |
| 3 | 재결 신청서 | 1 |
| 4 | 재결신청 청구서 | 1 |
| 5 | 사업계획서 | 1 |
| 6 | 사업인정 관련 고시 | 2 |
| 7 | 최초(도시계획결정 및 변경) 고시 사본 | 1 |
| 8 | 중토위 의견청취 관련 문서 | 3 |
| 9 | 소유자별서류 | 9 |
| 10 | 사업 예정지 및 사업계획 도면 | 1 |
| 11 | 협의관계서류 | 3 |
| 12 | 기본 조사서 | 2 |
| 13 | 기타 증빙서류 | N (복수) |

#### 4.4.3 파일 표시 기능
- 파일명 표시
- 파일 크기 표시
- 다운로드 버튼
- 미리보기 기능 (PDF 등)

### 4.5 섹션 5: 사업시행자 의견 (OpinionCaseTemplateCommentTabSection)

#### 4.5.1 컴포넌트 정보
- **컴포넌트**: OpinionCaseTemplateCommentTabSection
- **props**:
    - type: 'read' (읽기 전용)
    - opinionCaseTemplateCommitList: 의견 목록
- **데이터 조회**: useOpinionCaseTemplateCommitList

#### 4.5.2 표시 방식
- **탭 형식**: 의견 템플릿별 탭
- **읽기 전용**: 수정 불가
- **내용**: 사업시행자가 작성한 쟁점의견 확인

#### 4.5.3 CSS 스타일
```css
.sectionSpacing {
  margin-top: var(--spacing-xl);
}
```

---

## 5. 하단 버튼 영역

### 5.1 버튼 컨테이너 스타일

#### 5.1.1 CSS Module (`.buttonContainer`)
```css
.buttonContainer {
  margin-top: var(--spacing-xl);
  display: flex;
  justify-content: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-sm);
}
```

### 5.2 버튼 구성

#### 5.2.1 목록 보기 버튼
| 항목 | 내용 |
|------|------|
| 컴포넌트 | BasicButton |
| variant | outline |
| type | button |
| 동작 | `/conclusion/application` 이동 |
| 내부 요소 | `<Link to={'/conclusion/application'}> 목록 보기</Link>` |

**스타일**: 외곽선 버튼 (outline)

#### 5.2.2 검토 확인 버튼
| 항목 | 내용 |
|------|------|
| 컴포넌트 | BasicButton |
| variant | (기본) |
| type | submit |
| 동작 | 폼 제출 → 검토 시작 |

**스타일**: 주요 버튼 (primary)

### 5.3 폼 제출 처리

#### 5.3.1 폼 속성
```typescript
<form onSubmit={onSubmit} noValidate autoComplete="off">
```

- **noValidate**: HTML5 기본 검증 비활성화
- **autoComplete**: 자동완성 비활성화

#### 5.3.2 제출 핸들러 (useConclusionStartSubmit)

##### onSubmit 함수
```typescript
const onSubmit = (event: FormEvent<HTMLFormElement>) => {
  event.preventDefault()
  showConfirmMessage('심의서 검토중으로 상태를 변경 하시겠습니까?', () => {
    mutate({ judgSeq })
  })
}
```

**동작 순서**:
1. 기본 이벤트 차단 (preventDefault)
2. 확인 메시지 표시
3. 사용자 확인 시 API 호출 (mutate)

##### API 호출 (useInsertOrUpdateStartConclusion)
```typescript
const { mutate } = useInsertOrUpdateStartConclusion({
  mutation: {
    onSuccess: () => {
      showAlertMessageCallBack('검토 중으로 상태를 변경했습니다.', () => {
        navigate(`/conclusion/application/${judgSeq}/progress`, {
          state: { statusCode: 'CC001001' },
        })
      })
    },
    onError: error => {
      showAlertMessage(error.message)
    },
  },
})
```

**성공 시**:
1. 알림 메시지 표시: "검토 중으로 상태를 변경했습니다."
2. 검토 진행 화면으로 이동: `/conclusion/application/{judgSeq}/progress`
3. 상태 정보 전달: `state: { statusCode: 'CC001001' }`

**실패 시**:
- 오류 메시지 표시

---

## 6. 로딩 상태 처리

### 6.1 로딩 조건
```typescript
if (isConclusionCurrentStatusCodeLoading || isReceiptCurrentStatusCodeLoading) {
  return <SkeletonLoading />
}
```

**로딩 UI 표시 시점**:
- 접수 상태 코드 조회 중
- 검토 상태 코드 조회 중

### 6.2 스켈레톤 로딩
- **컴포넌트**: SkeletonLoading
- **표시 내용**: 로딩 스켈레톤 UI
- **목적**: 사용자 경험 향상

---

## 7. 데이터 흐름

### 7.1 초기 로딩 흐름
```
1. URL에서 judgSeq 추출 (useGetJudgSeq)
   ↓
2. 접수 상태 코드 조회 (useGetReceiptCurrentStatusCode)
   ↓
3. 검토 상태 코드 조회 (useGetConclusionCurrentStatusCode)
   ↓
4. 상태 검증 (useEffect)
   ├─ 정상: 화면 렌더링
   └─ 비정상: 알림 후 목록으로 이동
   ↓
5. 각 섹션별 데이터 조회
   - ReceiptCaseInfoView
   - ReceiptPreviousAppraisalView
   - ReceiptTotalQuantityReportView
   - ReceiptAttachmentFileView
   - OpinionCaseTemplateCommentTabSection
```

### 7.2 검토 확인 흐름
```
1. "검토 확인" 버튼 클릭
   ↓
2. 확인 메시지 표시: "심의서 검토중으로 상태를 변경 하시겠습니까?"
   ↓
3. 사용자 확인
   ↓
4. API 호출: useInsertOrUpdateStartConclusion
   ├─ 성공
   │  ├─ 알림: "검토 중으로 상태를 변경했습니다."
   │  └─ 이동: /conclusion/application/{judgSeq}/progress
   └─ 실패
      └─ 오류 메시지 표시
```

---

## 8. API 명세

### 8.1 상태 코드 조회 API

#### 8.1.1 접수 상태 코드 조회
**API 함수**: `useGetReceiptCurrentStatusCode`

**요청**:
```typescript
GET /api/receipt/current-status/{judgSeq}
```

**응답**:
```json
"CR001007"  // 상태 코드 문자열
```

#### 8.1.2 검토 상태 코드 조회
**API 함수**: `useGetConclusionCurrentStatusCode`

**요청**:
```typescript
GET /api/conclusion/current-status/{judgSeq}
```

**응답**:
```json
"CC001000"  // 상태 코드 문자열
```

### 8.2 검토 시작 API

#### 8.2.1 엔드포인트
**API 함수**: `useInsertOrUpdateStartConclusion`

**요청**:
```typescript
POST /api/conclusion/start
Content-Type: application/json

{
  "judgSeq": 123
}
```

**응답 (성공)**:
```json
{
  "success": true,
  "message": "검토가 시작되었습니다.",
  "statusCode": "CC001001"
}
```

**응답 (실패)**:
```json
{
  "success": false,
  "error": "INVALID_STATUS",
  "message": "검토를 시작할 수 없는 상태입니다."
}
```

### 8.3 섹션별 데이터 조회 API

#### 8.3.1 사업 정보
- **API**: `useGetReceiptCaseInfoByJudgSeq`
- **경로**: `/api/receipt/case-info/{judgSeq}`

#### 8.3.2 협의 감정평가 정보
- **API**: `useGetReceiptPreviousAppraisalByJudgSeq` (추정)
- **경로**: `/api/receipt/previous-appraisal/{judgSeq}`

#### 8.3.3 총 물량조서
- **API**: `useGetReceiptQuantityReportByJudgSeq` (추정)
- **경로**: `/api/receipt/quantity-report/{judgSeq}`

#### 8.3.4 첨부 파일
- **API**: `useGetReceiptAttachmentByJudgSeq` (추정)
- **경로**: `/api/receipt/attachment/{judgSeq}`

#### 8.3.5 사업시행자 의견
- **Hook**: `useOpinionCaseTemplateCommitList`
- **API**: (내부에서 처리)

---

## 9. 비즈니스 규칙

### 9.1 접근 제어 규칙

#### 9.1.1 필수 조건
1. **접수 상태**: CR001007 (의견작성 완료)
    - 사업시행자가 모든 단계를 완료해야 함
2. **검토 상태**: CC001000 (검토대기)
    - 재결관이 아직 검토를 시작하지 않은 상태

#### 9.1.2 차단 조건
| 조건 | 결과 |
|------|------|
| receiptCurrentStatusCode ≠ CR001007 | 접근 차단 |
| conclusionCurrentStatusCode ≠ CC001000 | 접근 차단 |

**차단 시 동작**:
- 알림 메시지: "잘못된 접근입니다."
- 목록 화면으로 이동: `/conclusion/application`

### 9.2 상태 변경 규칙

#### 9.2.1 검토 시작 시
- **변경 전**: CC001000 (검토대기)
- **변경 후**: CC001001 (검토중)

#### 9.2.2 상태 변경 조건
- 재결관 권한 확인
- 현재 상태가 CC001000인지 확인
- 사용자 확인 메시지 동의

### 9.3 데이터 무결성 규칙

#### 9.3.1 읽기 전용
- 모든 섹션은 **읽기 전용**
- 데이터 수정 불가
- 사업시행자가 입력한 원본 데이터 유지

#### 9.3.2 데이터 조회
- 항상 최신 데이터 조회 (staleTime: 0)
- 캐싱 없이 서버에서 직접 조회

---

## 10. UI/UX 사양

### 10.1 스타일링

#### 10.1.1 CSS Module 변수
```css
--spacing-xl    /* 섹션 간격, 버튼 컨테이너 여백 */
--spacing-lg    /* 버튼 간격 */
--spacing-sm    /* 버튼 컨테이너 패딩 */
```

#### 10.1.2 섹션 간격
```css
.sectionSpacing {
  margin-top: var(--spacing-xl);
}
```

**적용 위치**: 사업시행자 의견 섹션

#### 10.1.3 버튼 컨테이너
```css
.buttonContainer {
  margin-top: var(--spacing-xl);
  display: flex;
  justify-content: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-sm);
}
```

### 10.2 버튼 스타일

#### 10.2.1 목록 보기 버튼
- **variant**: outline
- **배경색**: 투명
- **테두리**: 있음
- **호버**: 배경색 변경

#### 10.2.2 검토 확인 버튼
- **variant**: (기본)
- **배경색**: primary color
- **테두리**: 없음
- **호버**: 배경색 진하게

### 10.3 사용자 피드백

#### 10.3.1 로딩 상태
- **표시**: SkeletonLoading 컴포넌트
- **시점**: API 조회 중

#### 10.3.2 알림 메시지
| 시점 | 메시지 | 타입 |
|------|--------|------|
| 잘못된 접근 | "잘못된 접근입니다." | Alert (콜백: 목록 이동) |
| 검토 확인 클릭 | "심의서 검토중으로 상태를 변경 하시겠습니까?" | Confirm |
| 검토 시작 성공 | "검토 중으로 상태를 변경했습니다." | Alert (콜백: 진행 화면 이동) |
| 검토 시작 실패 | error.message | Alert |

---

## 11. 오류 처리

### 11.1 상태 검증 오류

#### 11.1.1 잘못된 접수 상태
**발생 조건**: receiptCurrentStatusCode ≠ 'CR001007'

**처리**:
1. 알림 메시지 표시: "잘못된 접근입니다."
2. 목록 화면으로 이동

**시나리오**:
- 사업시행자가 아직 의견을 작성하지 않음
- 사업시행자가 이전 단계에 있음

#### 11.1.2 잘못된 검토 상태
**발생 조건**: conclusionCurrentStatusCode ≠ 'CC001000'

**처리**:
1. 알림 메시지 표시: "잘못된 접근입니다."
2. 목록 화면으로 이동

**시나리오**:
- 이미 검토중 (CC001001)
- 검토완료 (CC001002)

### 11.2 API 오류

#### 11.2.1 네트워크 오류
- **발생 시점**: 서버 연결 실패
- **처리**: 오류 메시지 표시
- **사용자 알림**: "서버와 연결할 수 없습니다."

#### 11.2.2 서버 오류 (5xx)
- **발생 시점**: 서버 내부 오류
- **처리**: 오류 메시지 표시
- **사용자 알림**: "일시적인 오류가 발생했습니다."

#### 11.2.3 권한 오류 (401, 403)
- **발생 시점**: 인증 만료 또는 권한 없음
- **처리**: 로그인 페이지로 리다이렉트
- **사용자 알림**: "로그인이 필요합니다."

### 11.3 데이터 오류

#### 11.3.1 데이터 없음
- **발생 시점**: judgSeq에 해당하는 데이터 없음
- **처리**: 빈 화면 또는 안내 메시지
- **사용자 알림**: "데이터를 찾을 수 없습니다."

#### 11.3.2 데이터 형식 오류
- **발생 시점**: API 응답 구조가 예상과 다름
- **처리**: 옵셔널 체이닝으로 안전하게 처리
- **폴백**: undefined 또는 빈 배열

---

## 12. 성능 최적화

### 12.1 데이터 조회 최적화

#### 12.1.1 캐싱 전략
- **staleTime**: 0 (항상 최신 데이터)
- **이유**: 상태 변경이 중요하므로 캐싱 없이 조회

#### 12.1.2 컴포넌트 분리
- 각 섹션을 독립적인 컴포넌트로 분리
- 섹션별 로딩 상태 관리
- 하나의 섹션 로딩이 전체 화면을 차단하지 않음

### 12.2 렌더링 최적화

#### 12.2.1 조건부 렌더링
```typescript
if (isLoading) {
  return <SkeletonLoading />
}
```

#### 12.2.2 컴포넌트 재사용
- Receipt 관련 View 컴포넌트 재사용
- Opinion 컴포넌트 재사용 (type='read')

---

## 13. 테스트 시나리오

### 13.1 정상 플로우 테스트

#### 13.1.1 검토 시작
1. 목록에서 "검토대기" 건 클릭
2. `/conclusion/application/{judgSeq}` 접속
3. 모든 섹션 데이터 로딩 확인
4. "검토 확인" 버튼 클릭
5. 확인 메시지 확인: "심의서 검토중으로 상태를 변경 하시겠습니까?"
6. "확인" 클릭
7. 성공 메시지 확인: "검토 중으로 상태를 변경했습니다."
8. 검토 진행 화면으로 이동 확인

#### 13.1.2 목록 돌아가기
1. 검토 시작 화면 접속
2. "목록 보기" 버튼 클릭
3. `/conclusion/application` 이동 확인

### 13.2 오류 플로우 테스트

#### 13.2.1 잘못된 상태에서 접근
1. 검토중 건의 URL 직접 접속
2. "잘못된 접근입니다." 알림 확인
3. 목록 화면으로 이동 확인

#### 13.2.2 검토 시작 실패
1. "검토 확인" 버튼 클릭
2. 확인 메시지에서 "확인" 클릭
3. API 오류 발생 (서버 중단 등)
4. 오류 메시지 표시 확인

### 13.3 권한 테스트

#### 13.3.1 재결관 권한 확인
1. 재결관 계정으로 로그인
2. 검토 시작 화면 접속
3. 정상 접근 확인

#### 13.3.2 사업시행자 접근 차단
1. 사업시행자 계정으로 로그인
2. URL 직접 접속 시도
3. 권한 오류 또는 접근 차단 확인

### 13.4 데이터 표시 테스트

#### 13.4.1 모든 섹션 표시
1. 각 섹션별 데이터 표시 확인
2. 사업 정보 표시
3. 협의 감정평가 정보 표시
4. 총 물량조서 표시
5. 첨부 파일 표시
6. 사업시행자 의견 표시

#### 13.4.2 읽기 전용 확인
1. 모든 입력 필드 비활성화 확인
2. 수정 버튼 없음 확인
3. 데이터 조회만 가능 확인

---

## 14. 접근성 (Accessibility)

### 14.1 키보드 네비게이션
- **Tab 키**: 버튼 간 이동
- **Enter 키**: 버튼 실행
- **Shift + Tab**: 역순 이동

### 14.2 스크린 리더 지원
- 버튼에 명확한 텍스트 제공
- 섹션별 제목 제공 (시맨틱 HTML)

### 14.3 포커스 관리
- 버튼 클릭 후 적절한 포커스 관리
- 모달 표시 시 포커스 이동

---

## 15. 보안 고려사항

### 15.1 인증/인가
- **세션 관리**: 로그인 세션 유지
- **권한 검증**: 재결관 권한 확인
- **상태 검증**: 서버측에서도 상태 재검증

### 15.2 데이터 보호
- **HTTPS**: 모든 통신 암호화
- **XSS 방지**: React의 자동 이스케이프 활용

### 15.3 CSRF 방지
- **토큰 검증**: API 호출 시 CSRF 토큰 포함

---

## 16. 향후 개선 사항

### 16.1 기능 개선
- [ ] PDF 미리보기 기능 (첨부파일)
- [ ] 인쇄 기능
- [ ] 이전/다음 건 네비게이션
- [ ] 검토 이력 표시

### 16.2 UX 개선
- [ ] 섹션별 접기/펼치기 기능
- [ ] 스크롤 시 상단 고정 헤더
- [ ] 진행 상태 인디케이터
- [ ] 키보드 단축키 지원

### 16.3 성능 개선
- [ ] 섹션별 lazy loading
- [ ] 이미지 최적화
- [ ] 가상 스크롤 (긴 목록)

---

## 17. 관련 문서

### 17.1 컴포넌트 경로
- ConclusionReviewStar: `src/views/conclusion/review/start/ConclusionReviewStar.tsx`
- useConclusionStartSubmit: `src/components/conclusion/conclusionStart/hook/useConclusionStartSubmit.ts`
- conclusionReview.module.css: `src/views/conclusion/review/conclusionReview.module.css`

### 17.2 재사용 컴포넌트
- ReceiptCaseInfoView: `src/components/receipt/receiptCaseInfo/ReceiptCaseInfoView.tsx`
- ReceiptPreviousAppraisalView: `src/components/receipt/receiptPreviousAppraisal/ReceiptPreviousAppraisalView.tsx`
- ReceiptTotalQuantityReportView: `src/components/receipt/receiptTotalQuantityReport/ReceiptTotalQuantityReportView.tsx`
- ReceiptAttachmentFileView: `src/components/receipt/receiptAttachment/ReceiptAttachmentFileView.tsx`
- OpinionCaseTemplateCommentTabSection: `src/components/opinion/template/comment/OpinionCaseTemplateCommentTabSection.tsx`

### 17.3 훅
- useGetJudgSeq: `src/hooks/useGetJudgSeq.ts`
- useGetReceiptCurrentStatusCode: `src/api/receipt-base-api/receipt-base-api.ts`
- useGetConclusionCurrentStatusCode: `src/api/conclusion-base-api/conclusion-base-api.ts`
- useOpinionCaseTemplateCommitList: `src/components/receipt/receiptTemplateOpinion/hook/useOpinionCaseTemplateCommitList.ts`

### 17.4 연관 화면
- 목록 화면: `/conclusion/application` (요구사항_정의서_재결검토_목록화면.md)
- 검토 진행 화면: `/conclusion/application/{judgSeq}/progress`
- 검토 완료 화면: `/conclusion/application/{judgSeq}/complete`

---

## 18. 변경 이력

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 2025-XX-XX | 1.0 | 초안 작성 | - |

---

## 19. 용어 정의

| 용어 | 설명 |
|------|------|
| 재결 | 토지 수용 및 보상에 관한 분쟁을 해결하기 위한 행정적 결정 |
| 재결관 | 재결 업무를 담당하는 공무원 또는 위원 |
| 사업시행자 | 공공사업을 시행하는 기관 또는 단체 |
| 심의서 | 재결관이 검토하는 재결신청 관련 문서 |
| 검토대기 | 재결관이 검토를 시작하지 않은 상태 (CC001000) |
| 검토중 | 재결관이 검토를 진행하고 있는 상태 (CC001001) |
| 검토완료 | 재결관 검토가 완료된 상태 (CC001002) |
| 의견작성 | 사업시행자가 의견을 작성한 상태 (CR001007) |