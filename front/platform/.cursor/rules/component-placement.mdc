---
description: 컴포넌트 배치·분리 규칙 (컬로케이션, 단일 책임, 디렉터리 용도)
globs: '**/*.tsx'
alwaysApply: false
---

# 컴포넌트 작성 규칙

## 디렉터리 용도

| 위치                       | 용도                                                                       |
| -------------------------- | -------------------------------------------------------------------------- |
| `src/common/components/ui` | 디자인 시스템·공통 UI (FormInput, Button, Box, Card). 여러 뷰에서 사용.    |
| `src/views/<기능>/`        | 해당 페이지/기능 전용 컴포넌트. 스타일·훅·테스트도 같은 폴더에 컬로케이션. |
| `src/components`           | **여러 기능에서 재사용**하는 컴포넌트만. 기능 전용은 여기 두지 않음.       |

## 컴포넌트 선언 방식

- **함수 선언 + default export**를 사용한다. `React.FC`는 사용하지 않는다.
- Props가 있으면 **인자에만 타입을 지정**한다.

```tsx
// ✅ Props 없음
export default function Home() {
  return <div>...</div>
}

// ✅ Props 있음
interface ListProps {
  pageSize: number
}
export default function ApplicationList({ pageSize }: ListProps) {
  return <div>...</div>
}
```

```tsx
// ❌ 사용하지 않음
const Home: React.FC = () => { ... }
const Table: React.FC<TableProps> = (props) => { ... }
```

## 배치 원칙

- **기능 전용 컴포넌트**: `src/components`가 아니라 **`src/views/<기능>/` 하위**에 둔다.
- **컬로케이션**: 컴포넌트, `.module.css`, `hooks/`, 테스트를 같은 기능 폴더 안에 둔다.
- **단일 책임**: 한 컴포넌트는 한 가지 역할. 복잡해지면 하위 컴포넌트로 분리.
- **API 호출**: orval에서 만든 API만 사용 한다. (**`/src/gen/hooks`, `/src/gen/model`**)

## 다수 페이지 기능의 컴포넌트 구조

한 기능 하위에 `List`, `View`, `Write` 등 **여러 페이지**가 존재할 때, 전용 컴포넌트는 `components/<page>/` 하위로 분리한다.

```text
# ✅ 다수 페이지 — 페이지별 컴포넌트 폴더 분리
src/views/implementer/application/
├── List.tsx
├── View.tsx
├── Write.tsx
└── components/
    ├── list/           ← List.tsx 전용
    │   ├── SearchForm.tsx
    │   └── ApplicationTable.tsx
    ├── view/           ← View.tsx 전용
    └── write/          ← Write.tsx 전용
    └── (공유 컴포넌트는 components/ 루트에)
```

```text
# ❌ 페이지 구분 없이 components/ 한 곳에 모으지 않기
components/
  SearchForm.tsx      # List 전용인지 Write 전용인지 불분명
  WriteForm.tsx
```

## frame 컴포넌트 하위 컴포넌트 배치

`CommonHeader`, `CommonFooter` 등 frame 컴포넌트가 복잡해지면 **같은 폴더의 `components/`** 에 분리한다.

```text
src/common/components/frame/header/
├── CommonHeader.tsx
├── CommonHeader.module.css
└── components/
    ├── GnbMenu.tsx
    ├── GnbMenu.module.css
    ├── UserMenu.tsx
    └── UserMenu.module.css
```

## 분리 시점

- 한 파일이 **150~200줄 이상**이거나, 타이틀/폼/에러 영역처럼 **역할이 명확히 나뉠 때** 분리.
- 분리 시 **같은 기능 폴더 안**에 둔다 (예: `views/login/LoginForm.tsx`, `views/login/components/LoginCard.tsx`).
- 다른 화면에서도 쓰게 되면 그때 `src/components`로 올려서 공유 검토.

## TDD

- **작성 순서**: 실패하는 테스트 작성 → 구현 → 리팩터 (Red-Green-Refactor).
- **테스트 위치**: 컴포넌트와 **같은 폴더**에 컬로케이션. 파일명은 `ComponentName.test.tsx` 또는 `ComponentName.spec.tsx` (Vitest include 패턴과 일치).
- **도구**: Vitest, Testing Library (setup에 포함). 전역 `describe`/`it`/`expect` 사용 가능.
- **범위**: 새로 추가·수정하는 컴포넌트/훅에 대해 테스트를 먼저 또는 구현과 함께 작성한다.

## 제약

- 별도의 명령이 없으면 API 호출은 TODO로 남겨 둔다.

## 예시

```text
# ✅ 기능 전용 — views 하위에 컬로케이션
src/views/login/
├── LoginApplication.tsx
├── LoginApplication.test.tsx
├── LoginApplication.module.css
├── components
│     └── LoginForm.tsx          # 복잡한 경우 분리
├── hooks/
│   └── useLoginForm.ts
```

```text
# ❌ 기능 전용인데 src/components에 두지 않기
src/components/LoginForm.tsx   # 로그인만 쓰면 views/login/ 에 둠
```

## 마무리

- `yarn format` 로 소스 정리
- `yarn lint:fix`로 lint 검사
